<?xml version="1.0"encoding="utf-8"?>
<featureMC>
    <featuremodel type="type" id="1" >
        <context>
            <and name="Collaborative Context" >
                <feature name="Follow Leader" />
                <feature name="Coordinate Joining Maneuver" />
                <feature name="Form Gap" />
                <feature name="Lead Platoon" />
            </and>
        </context>
        <system instances="5">
            <alt name="CACC" >
                <and name="Lead Platoon" >
                    <feature name="Coordinate Joining Maneuver" relation="optional" />
                    <feature name="Coordinate Leaving Maneuver" relation="optional" />
                    <feature name="Coordinate Lane Change" relation="optional" />
                </and>
                <and name="Follow Leader" >
                    <feature name="Form Gap" relation="optional" />
                    <feature name="Leave Platoon" relation="optional" />
                </and>
                <feature name="Join Platoon" />
            </alt>
        </system>
    </featuremodel>

    <featuremodel type="group" id="2" >
        <and name="Platoon" >
            <and name="Platoon Maneuvers" relation="mandatory" >
                <feature name="Joining" relation="optional" />
                <feature name="Follower Leaving" relation="mandatory" />
                <feature name="Dissolving" relation="mandatory" />
                <feature name="Overtaking" relation="optional" />
            </and>
        </and>
    </featuremodel>

    <constraint>
        <requires sourceid="2" sourcetype="group" source="Platoon Maneuvers" targetid="1" targettype="system" target="Lead Platoon" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Joining" targetid="1" targettype="system" target="Join Platoon" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Joining" targetid="1" targettype="system" target="Coordinate Joining Maneuver" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Follower Leaving" targetid="1" targettype="system" target="Leave Platoon" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Follower Leaving" targetid="1" targettype="system" target="Coordinate Leaving Maneuver" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Dissolving" targetid="1" targettype="system" target="Follow Leader" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Dissolving" targetid="1" targettype="system" target="Leave Platoon" cardinality="1..1" />
        <requires sourceid="2" sourcetype="group" source="Overtaking" targetid="1" targettype="system" target="Coordinate Lane Change" cardinality="1..1" />


        <requires sourceid="1" sourcetype="system" source="Follow Leader" targetid="1" targettype="context" target="Lead Platoon" cardinality="1..1" />
        <requires sourceid="1" sourcetype="system" source="Lead Platoon" targetid="1" targettype="context" target="Follow Leader" cardinality="1..*" />
        <requires sourceid="1" sourcetype="system" source="Coordinate Joining Maneuver" targetid="1" targettype="context" target="Form Gap" cardinality="1..1" />
        <requires sourceid="1" sourcetype="system" source="Leave Platoon" targetid="1" targettype="context" target="Follow Leader" cardinality="1..*" />
        <requires sourceid="1" sourcetype="system" source="Join Platoon" targetid="1" targettype="context" target="Coordinate Joining Maneuver" cardinality="1..1" />

        <excludes sourceid="1" sourcetype="system" source="Form Gap" targetid="1" targettype="system" target="Leave Platoon"/>
    </constraint>
</featureMC>





